---
layout: default
---
<div id="confirming-page" class="page">
    <div class="spinner"></div>
    Confirming subscription
</div>
<script>
(function() {
    let page = document.querySelector("#confirming-page");
    let campaignMatch = location.search.match(/campaign=([^&]+)/);
    let subscriberMatch = location.search.match(/subscriber=([^&]+)/);
    if(!campaignMatch || !subscriberMatch) {
        return page.innerHTML = `
            <h1>Missing subscription specification</h1>
            <p>The campaign and subscriber IDs that specify which subscription to confirm are missing from the URL, so we can't confirm your subscription.</p>
        `;
    }
    hype.campaign.confirmSubscription(campaignMatch[1], subscriberMatch[1], (error) => {
        if(error) {
            return page.innerHTML = `
                <h1>Confirmation failed</h1>
                <p>Refresh the page to try again.</p>
            `;
        }
        page.innerHTML = `
            <h1>Confirmed</h1>
            <p>Your subscription has been confirmed and you will now start receiving emails from the newsletter.</p>
        `;
    });
})();
</script>
